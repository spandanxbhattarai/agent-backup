# SIP Configuration for Asterisk
# /etc/asterisk/sip.conf

[general]
context = default
allowguest = no
allowoverlap = no
bindport = 5060
bindaddr = 0.0.0.0
srvlookup = yes
disallow = all
allow = ulaw
allow = alaw
allow = gsm
allow = g729
alwaysauthreject = yes
rtcachefriends = yes
rtsavesysname = yes
rtupdate = yes
rtautoclear = 120
nat = force_rport,comedia
canreinvite = no
qualify = yes
videosupport = yes
maxcallbitrate = 384

# DID/SIP Trunk Configuration (for regular SIP providers)
[trunk-provider]
type = peer
host = sip.your-provider.com  ; Replace with your SIP provider
username = your-username      ; Replace with your username
secret = your-password        ; Replace with your password
fromuser = your-did-number    ; Replace with your DID number
fromdomain = sip.your-provider.com
insecure = port,invite
context = from-external
dtmfmode = rfc2833
canreinvite = no
qualify = yes

# Twilio SIP Domain Configuration
[twilio-trunk]
type = peer
host = your-domain.pstn.twilio.com  ; Replace with your Twilio SIP domain
username = your-twilio-username     ; Replace with your Twilio SIP username
secret = your-twilio-password       ; Replace with your Twilio SIP password
fromdomain = your-domain.pstn.twilio.com
insecure = port,invite
context = from-twilio
dtmfmode = rfc2833
canreinvite = no
qualify = yes
nat = force_rport,comedia

# Softphone extensions for your application
[1001]
type = friend
username = 1001
secret = password123
host = dynamic
context = default
qualify = yes
nat = force_rport,comedia
canreinvite = no
dtmfmode = rfc2833
mailbox = 1001@default
callerid = "Restaurant App" <1001>

[1002]
type = friend
username = 1002
secret = password123
host = dynamic
context = default
qualify = yes
nat = force_rport,comedia
canreinvite = no
dtmfmode = rfc2833
mailbox = 1002@default
callerid = "Restaurant Backup" <1002>

[1003]
type = friend
username = 1003
secret = manager123
host = dynamic
context = default
qualify = yes
nat = force_rport,comedia
canreinvite = no
dtmfmode = rfc2833
mailbox = 1003@default
callerid = "Restaurant Manager" <1003>

# WebRTC configuration for browser-based calling
[webrtc-client]
type = friend
username = webrtc
secret = webrtc123
host = dynamic
context = default
transport = ws,wss
qualify = yes
nat = force_rport,comedia
canreinvite = no
dtmfmode = rfc2833
encryption = yes
avpf = yes
icesupport = yes
directmedia = no